function validate(n){var g,b,i,f,t;if(chkduplicate==0){var e=n.getCellData("value"),p=n.getCellData("dropdownvalue"),w=n.getCellData("textvalue");if(n.iColumn==2){for(g=n.cell.id,b=0;b<n.iRow;b++)if(i=FGRIDCONTROL.getCellObject("PaymentTermsGrid",b+1,2),f=i.getCellData("value"),i.iRow!=n.iRow&&e!=null&&e.trim()!=""&&e==f)return COMMON.prototype.showMessage(Msg.msgAlreayCodeExist),n.setCellData("value",""),n.setCellText(""),!1}else if(n.iColumn==4){if((e==""||e==null||e==undefined||e=="NaN")&&(t=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow),t[1].Value!=null||t[1].Text.trim()!=""||t[4].Text.trim()!=""))return COMMON.prototype.showMessage(Msg.msgAccountMandatory_PT),!1}else if(n.iColumn==5){var k=parseInt(p),h=dateValidation(k.toString(),w),r=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,6),c=r.getCellData("dropdownvalue"),l=r.getCellData("textvalue"),a=dateValidation(c,l);if(a>h)return COMMON.prototype.showMessage(Msg.msgValidDueDateNDiscDate_PT),!1;if(t=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow),t[4].Data.textvalue<=0&&t[4].Data.dropdownvalue<5)return COMMON.prototype.showMessage(Msg.msgMDueDate),!1}else if(n.iColumn==6){var i=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,5),o=i.getCellData("dropdownvalue"),s=i.getCellData("textvalue"),k=parseInt(o),u=dateValidation(k.toString(),s),h=dateValidation(p,w),r=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,8),c=r.getCellData("dropdownvalue"),l=r.getCellData("textvalue"),a=dateValidation(c,l);if(t=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow),t[5].Data.textvalue<=0&&t[5].Data.dropdownvalue<6)return(t[5].Data.dropdownvalue!=-1&&t[5].Data.dropdownvalue!=0||t[5].Data.dropdownvalue!=5)&&COMMON.prototype.showMessage(Msg.msgErrorDiscDate_PT),!1;if(h>u)return COMMON.prototype.showMessage(Msg.msgValidDueDateNDiscDate_PT),n.setCellText(""),n.setCellData("textvalue",""),n.setCellData("dropdownvalue",""),!1;if(a>=h)return COMMON.prototype.showMessage(Msg.msgDueDateLessThanNextDate),n.setCellText(""),n.setCellData("textvalue",""),n.setCellData("dropdownvalue",""),!1}else if(n.iColumn==8){var i=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,6),o=i.getCellData("dropdownvalue"),s=i.getCellData("textvalue"),u=dateValidation(o,s),h=dateValidation(p,w),r=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,10),c=r.getCellData("dropdownvalue"),l=r.getCellData("textvalue"),a=dateValidation(c,l);if(t=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow),h>=u)return COMMON.prototype.showMessage(Msg.msgValidDiscDateNDisDate_PT),n.setCellText(""),n.setCellData("textvalue",""),n.setCellData("dropdownvalue",""),!1;if(t[7].Data.textvalue<=0&&t[7].Data.dropdownvalue<6&&t[7].Text.trim()!="")return t[7].Data.dropdownvalue!=-1&&COMMON.prototype.showMessage(Msg.msgErrorDiscDate_PT),!1;if(a>=h)return COMMON.prototype.showMessage(Msg.msgValidDiscDateNDisDate_PT),n.setCellText(""),n.setCellData("textvalue",""),n.setCellData("dropdownvalue",""),!1}else if(n.iColumn==7){if(t=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow),t[6].Data.value<=0)return COMMON.prototype.showMessage(Msg.msgDSLessThanZero),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;if(t[6].Data.value>=100)return COMMON.prototype.showMessage(Msg.msgValidDisc_PT),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;var v=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,6),o=v.getCellData("dropdownvalue"),s=v.getCellData("textvalue"),u=dateValidation(o,s);if(u==0||u==-1)return COMMON.prototype.showMessage(Msg.msgValidDisc_PT),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;var i=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,9),f=i.getCellData("value"),r=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,11),y=r.getCellData("value"),d=e;if(f==""||f=="0.00"||f==null)return!1;if(parseFloat(e)>=parseFloat(f))return COMMON.prototype.showMessage(Msg.msgDSGreaterThenNextDiscount),n.setCellData("value","0.00"),n.setCellText("0.00"),!1}else if(n.iColumn==9){if(t=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow),t[8].Data.value<=0)return COMMON.prototype.showMessage(Msg.msgDSLessThanZero),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;if(t[8].Data.value>=100)return COMMON.prototype.showMessage(Msg.msgValidDisc_PT),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;var v=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,8),o=v.getCellData("dropdownvalue"),s=v.getCellData("textvalue"),u=dateValidation(o,s);if(u==0||u==-1)return COMMON.prototype.showMessage("Discount should not be 0 or negative"),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;var i=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,7),f=i.getCellData("value"),r=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,11),y=r.getCellData("value");if(parseFloat(e)<=parseFloat(f)||f=="")return COMMON.prototype.showMessage(Msg.PT_MasgDSGreaterThenPreviousDiscount),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;if(y==""||y=="0.00"||y==null)return!1;if(parseFloat(e)>=parseFloat(y))return COMMON.prototype.showMessage(Msg.msgDSGreaterThenNextDiscount),r.setCellData("value","0.00"),r.setCellText("0.00"),!1}else if(n.iColumn==10){var i=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,8),o=i.getCellData("dropdownvalue"),s=i.getCellData("textvalue"),u=dateValidation(o,s),h=dateValidation(p,w);if(t=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow),t[9].Data.textvalue<=0&&t[9].Data.dropdownvalue<6)return t[9].Data.dropdownvalue!=-1&&COMMON.prototype.showMessage(Msg.msgErrorDiscDate_PT),!1;if(h>=u)return COMMON.prototype.showMessage(Msg.msgValidDiscDateNDisDate_PT),n.setCellText(""),n.setCellData("textvalue",""),n.setCellData("dropdownvalue",""),!1}else if(n.iColumn==11){if(t=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow),t[10].Data.value<=0)return COMMON.prototype.showMessage(Msg.msgDSLessThanZero),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;if(t[10].Data.value>=100)return COMMON.prototype.showMessage(Msg.msgValidDisc_PT),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;var r=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,10),o=r.getCellData("dropdownvalue"),s=r.getCellData("textvalue"),u=dateValidation(o,s);if(u==0||u==-1)return COMMON.prototype.showMessage("Discount should not be 0 or negative"),n.setCellData("value","0.00"),n.setCellText("0.00"),!1;var i=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,9),f=i.getCellData("value"),d=parseFloat(e),nt=parseFloat(f);if(d<=nt||f=="")return COMMON.prototype.showMessage(Msg.PT_MasgDSGreaterThenPreviousDiscount),n.setCellData("value","0.00"),n.setCellText("0.00"),!1}}else chkduplicate=0}function dateValidation(n,t){if(n<0||n=="")return-1;switch(n){case"0":return parseInt(t);case"1":return 7*parseInt(t);case"2":return 30*parseInt(t);case"3":return 1*parseInt(t);case"4":return 1*parseInt(t);default:return 0}}function Changefocus(n,t){$("#"+n).change(function(){var i=$("#"+n).val();n=="slopt1"&&(i=parseInt(i)+1);i==6?$("#"+t).attr("disabled","disabled"):$("#"+t).removeAttr("disabled");$("#"+t).focus()})}function SelectRow(n){$("#PaymentTermsGrid tbody tr").removeClass("FRowColor");$(n.cell).parent().hasClass("FRowColor")||$(n.cell).parent().addClass("FRowColor")}var chkduplicate=0,isTransExit=!1,paymentTermsID=0,PAYMENTTERMS={onLeave:function(n,t){if((n.iColumn==1||n.iColumn==12)&&n.processDefault(t),n.ColumnAttribute.ctrlid=="id_Code"&&(document.getElementById("id_Code").value!=""?(celldisplaytext=document.getElementById("id_Code").value,n.setCellData("value",document.getElementById("id_Code").value),n.setCellText(celldisplaytext),n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn),validate(n)):(n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn),validate(n))),n.ColumnAttribute.ctrlid=="id_Desc"&&document.getElementById("id_Desc").value!=""&&(celldisplaytext=document.getElementById("id_Desc").value,n.setCellData("value",document.getElementById("id_Desc").value),n.setCellText(document.getElementById("id_Desc").value)),n.ColumnAttribute.ctrlid=="id_Dis"&&document.getElementById("id_Dis").value!=""&&(celldisplaytext=parseFloat(document.getElementById("id_Dis").value).toFixed(2),n.setCellData("value",document.getElementById("id_Dis").value),n.setCellText(celldisplaytext),n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn),validate(n)),n.ColumnAttribute.ctrlid=="id_Dis2"&&document.getElementById("id_Dis2").value!=""&&(celldisplaytext=parseFloat(document.getElementById("id_Dis2").value).toFixed(2),n.setCellData("value",document.getElementById("id_Dis2").value),n.setCellText(document.getElementById("id_Dis2").value),n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn),validate(n)),n.ColumnAttribute.ctrlid=="id_Dis3"&&document.getElementById("id_Dis3").value!=""&&(celldisplaytext=parseFloat(document.getElementById("id_Dis3").value).toFixed(2),n.setCellData("value",document.getElementById("id_Dis3").value),n.setCellText(document.getElementById("id_Dis3").value),n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn),validate(n)),n.ColumnAttribute.ctrlid=="DiscountAccCtrlOption"&&(data=OPTIONCONTROL.getControlData(n.ColumnAttribute.ctrlid),n.setCellData("value",parseInt(COMMON.prototype.getObjectFirstPropertyValue(data[0]))),n.setCellData("text",COMMON.prototype.getObjectFirstPropertyValue(data[1])),n.setCellText(COMMON.prototype.getObjectFirstPropertyValue(data[1])),n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn),validate(n)),n.ColumnAttribute.ctrlid=="opt1")document.getElementById("slopt1").selectedIndex<0?(celldisplaytext="0 "+document.getElementById("slopt1").options[0].text,n.setCellData("textValue",0),n.setCellData("dropDownValue",0),n.setCellData("value",document.getElementById("opt1Txt").value+""+document.getElementById("slopt1").options[0].text)):((document.getElementById("opt1Txt").value==null||document.getElementById("opt1Txt").value=="")&&(document.getElementById("opt1Txt").value="0"),document.getElementById("slopt1").options[document.getElementById("slopt1").selectedIndex].text=="End of Month"&&(document.getElementById("opt1Txt").value=""),celldisplaytext=document.getElementById("opt1Txt").value+" "+document.getElementById("slopt1").options[document.getElementById("slopt1").selectedIndex].text,n.setCellData("textValue",document.getElementById("opt1Txt").value),n.setCellData("dropDownValue",document.getElementById("slopt1").value),n.setCellData("value",document.getElementById("opt1Txt").value+""+document.getElementById("slopt1").options[0].text)),n.setCellText(celldisplaytext),n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn),validate(n);else if(n.ColumnAttribute.ctrlid=="dis1opt1"){document.getElementById("dis1slopt1").selectedIndex<0?(celldisplaytext="0 "+document.getElementById("dis1slopt1").options[1].text,n.setCellData("textValue",0),n.setCellData("dropDownValue",0),n.setCellData("value",document.getElementById("dis1opt1Txt").value+""+document.getElementById("dis1slopt1").options[0].text)):((document.getElementById("dis1opt1Txt").value==null||document.getElementById("dis1opt1Txt").value=="")&&(document.getElementById("dis1opt1Txt").value="0"),(parseInt(document.getElementById("dis1slopt1").selectedIndex)==0||parseInt(document.getElementById("dis1slopt1").selectedIndex)==6)&&(document.getElementById("dis1opt1Txt").value=""),parseInt(document.getElementById("dis1slopt1").selectedIndex)==0?n.setCellData("dropDownValue",-1):n.setCellData("dropDownValue",document.getElementById("dis1slopt1").value),celldisplaytext=document.getElementById("dis1opt1Txt").value+" "+document.getElementById("dis1slopt1").options[document.getElementById("dis1slopt1").selectedIndex].text,n.setCellData("textValue",document.getElementById("dis1opt1Txt").value),n.setCellData("value",document.getElementById("dis1opt1Txt").value+""+document.getElementById("dis1slopt1").options[0].text));n.setCellText(celldisplaytext);var i=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow);n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn);validate(n)}else n.ColumnAttribute.ctrlid=="dis2opt1"?(document.getElementById("dis2slopt1").selectedIndex<0?(celldisplaytext="",n.setCellData("textValue",""),n.setCellData("dropDownValue",-1),n.setCellData("value",document.getElementById("dis2opt1Txt").value+""+document.getElementById("dis2slopt1").options[0].text)):((document.getElementById("dis2opt1Txt").value==null||document.getElementById("dis2opt1Txt").value=="")&&(document.getElementById("dis2opt1Txt").value="0"),(parseInt(document.getElementById("dis2slopt1").selectedIndex)==0||parseInt(document.getElementById("dis2slopt1").selectedIndex)==6)&&(document.getElementById("dis2opt1Txt").value=""),parseInt(document.getElementById("dis2slopt1").selectedIndex)==0?n.setCellData("dropDownValue",-1):n.setCellData("dropDownValue",document.getElementById("dis2slopt1").value),celldisplaytext=document.getElementById("dis2opt1Txt").value==""&&parseInt(document.getElementById("dis2slopt1").selectedIndex)!=0&&parseInt(document.getElementById("dis2slopt1").selectedIndex)!=6?"":document.getElementById("dis2opt1Txt").value+" "+document.getElementById("dis2slopt1").options[document.getElementById("dis2slopt1").selectedIndex].text,n.setCellData("textValue",document.getElementById("dis2opt1Txt").value),n.setCellData("value",document.getElementById("dis2opt1Txt").value+""+document.getElementById("dis2slopt1").options[0].text)),n.setCellText(celldisplaytext),n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn),validate(n)):n.ColumnAttribute.ctrlid=="dis3opt1"&&(document.getElementById("dis3slopt1").selectedIndex<0?(celldisplaytext="",n.setCellData("textValue",""),n.setCellData("dropDownValue",-1),n.setCellData("value",document.getElementById("dis3opt1Txt").value+""+document.getElementById("dis3slopt1").options[0].text)):((document.getElementById("dis3opt1Txt").value==null||document.getElementById("dis3opt1Txt").value=="")&&(document.getElementById("dis3opt1Txt").value="0"),(parseInt(document.getElementById("dis3slopt1").selectedIndex)==0||parseInt(document.getElementById("dis3slopt1").selectedIndex)==6)&&(document.getElementById("dis3opt1Txt").value=""),parseInt(document.getElementById("dis3slopt1").selectedIndex)==0?n.setCellData("dropDownValue",-1):n.setCellData("dropDownValue",document.getElementById("dis3slopt1").value),celldisplaytext=document.getElementById("dis3opt1Txt").value==""&&parseInt(document.getElementById("dis3slopt1").selectedIndex)!=0&&parseInt(document.getElementById("dis3slopt1").selectedIndex)!=6?"":document.getElementById("dis3opt1Txt").value+" "+document.getElementById("dis3slopt1").options[document.getElementById("dis3slopt1").selectedIndex].text,n.setCellData("textValue",document.getElementById("dis3opt1Txt").value),n.setCellData("value",document.getElementById("dis3opt1Txt").value+""+document.getElementById("dis3slopt1").options[0].text)),n.setCellText(celldisplaytext),n=FGRIDCONTROL.getCellObject("PaymentTermsGrid",n.iRow,n.iColumn),validate(n));return!0},onEnter:function(n,t){var e,u,i,r,o,f;if(e=FGRIDCONTROL.getTotalRows("PaymentTermsGrid"),u=FGRIDCONTROL.getRowValue("PaymentTermsGrid",n.iRow),n.iRow==e)PAYMENTTERMS.onExchangeInsertRow(n.iRow+1);if((n.iColumn==1||n.iColumn==12)&&n.processDefault(t),i=null,r=0,n.ColumnAttribute.ctrlid=="slno"&&SelectRow(n),n.ColumnAttribute.ctrlid=="DiscountAccCtrlOption"?(n.setCellText(""),i=document.getElementById(n.ColumnAttribute.ctrlid),OPTIONCONTROL.setParent(i,n.cell),r=0,COMMON.prototype.isInteger(n.CellData.value)==!0&&(r=parseInt(n.getCellData("value"))),r<=0?OPTIONCONTROL.clear(i):OPTIONCONTROL.setControlValue(i,r)):n.ColumnAttribute.ctrlid=="opt1"?(i=document.getElementById("opt1Txt"),i.value=n.getCellData("textValue"),i=document.getElementById("slopt1"),i.value=n.getCellData("dropDownValue"),i.value==""&&(i=document.getElementById("opt1Txt"),i.value="",i=document.getElementById("slopt1"),i.value=0,i=document.getElementById("slopt1").options[0].text,n.setCellData("value",document.getElementById("slopt1").options[0].text),n.setControl(i,n.getCellData("value"))),Changefocus("slopt1","opt1Txt")):n.ColumnAttribute.ctrlid=="dis1opt1"?(i=document.getElementById("dis1opt1Txt"),i.value=n.getCellData("textValue"),i=document.getElementById("dis1slopt1"),i.value=n.getCellData("dropDownValue"),i.value==""&&(i=document.getElementById("dis1opt1Txt"),i.value="",i=document.getElementById("dis1slopt1"),i.value=0,i=document.getElementById("dis1slopt1").options[0].text,n.setCellData("value",document.getElementById("dis1slopt1").options[0].text),n.setControl(i,n.getCellData("value"))),Changefocus("dis1slopt1","dis1opt1Txt")):n.ColumnAttribute.ctrlid=="dis2opt1"?($("#dis2slopt1").val(0),i=document.getElementById("dis2opt1Txt"),i.value=n.getCellData("textValue"),i=document.getElementById("dis2slopt1"),i.value=n.getCellData("dropDownValue"),Changefocus("dis2slopt1","dis2opt1Txt")):n.ColumnAttribute.ctrlid=="dis3opt1"?(i=document.getElementById("dis3opt1Txt"),i.value=n.getCellData("textValue"),i=document.getElementById("dis3slopt1"),i.value=n.getCellData("dropDownValue"),Changefocus("dis3slopt1","dis3opt1Txt")):n.ColumnAttribute.ctrlid=="id_Code"?i=document.getElementById("id_Code"):n.ColumnAttribute.ctrlid=="id_Desc"?i=document.getElementById("id_Desc"):n.ColumnAttribute.ctrlid=="id_Dis"?i=document.getElementById("id_Dis"):n.ColumnAttribute.ctrlid=="id_Dis2"?i=document.getElementById("id_Dis2"):n.ColumnAttribute.ctrlid=="id_Dis3"&&(i=document.getElementById("id_Dis3")),i=document.getElementById(n.ColumnAttribute.ctrlid),f=u[11].Value==""?0:u[11].Value,f!=""&&NETWORK.executeServerMethod(GLOBAL.getContextPath("IsTransVoucherExit","CreditManagement","CreditManagement"),!0,{PaymentTermId:f},"",!1,"PAYMENTTERMS.TestTdetailsSuccess","GLOBAL.LoadingStart","GLOBAL.LoadingEnd"),o!="Days"){if(isTransExit==!0&&(n.ColumnAttribute.ctrlid=="id_Dis"||n.ColumnAttribute.ctrlid=="id_Dis2"||n.ColumnAttribute.ctrlid=="id_Dis3")){COMMON.prototype.showMessage("Discount Can not Be edited Once Transaction Vouchers existed with the Discount from Payment Terms");return}n.setControl(i,n.getCellData("value"))}},TestTdetailsSuccess:function(n,t){n==!0&&t!=""&&(isTransExit=t)},gridcellChange:function(n,t){if(n.bLeave==!0)return PAYMENTTERMS.onLeave(n,t);PAYMENTTERMS.onEnter(n,t)},onCellChange:function(n,t){return n.processDefault(t),1},SavePaymentTerms:function(){var e,o,t,n,a,f,i,c,v,r,u,s,h,l;for(chkduplicate=1,e=[],o=FGRIDCONTROL.getTotalRows("PaymentTermsGrid"),t=0;t<o;t++){if(n=FGRIDCONTROL.getRowValue("PaymentTermsGrid",t+1),(n[1].Value==null||n[1].Text.trim()==""||n[3].Value==null||n[3].Value=="NaN"||n[4].Text.trim()=="")&&t==0)return n[1].Value==null||n[1].Text.trim()==""?COMMON.prototype.showMessage(Msg.msgIsValidCode_PT):n[3].Value==null||n[3].Value=="NaN"?COMMON.prototype.showMessage(Msg.msgAccountMandatory_PT):n[4].Text.trim()==""&&COMMON.prototype.showMessage(Msg.msgMDueDate),!1;if(a=n[4].Data.textvalue,n[1].Value!=null&&n[1].Text.trim()!=""&&n[1].Value!=undefined||n[3].Value!=null&&n[3].Value!=undefined&&n[3].Value!=""||n[4].Text.trim()!=""&&n[4].Data.textvalue>0){if(n[1].Value==null||n[3].Value=="NaN"||n[1].Text.trim()==""||n[3].Value==null||n[3].Value==0||n[4].Text.trim()==""||n[4].Data.textvalue<=0){if(n[1].Value==null||n[1].Text.trim()=="")return COMMON.prototype.showMessage(Msg.msgIsValidCode_PT),!1;if(n[3].Value==null||n[3].Value==0||n[3].Value=="NaN")return COMMON.prototype.showMessage(Msg.msgAccountMandatory_PT),!1;if(n[4].Text.trim()=="")return COMMON.prototype.showMessage(Msg.msgMDueDate),!1;if(n[4].Data.textvalue<=0&&n[4].Data.dropdownvalue<4)return COMMON.prototype.showMessage(Msg.PT_MasgDueDateShouldNotbezero),!1}if(n[1].Value!=null)for(f=0;f<o;f++)if(i=FGRIDCONTROL.getCellObject("PaymentTermsGrid",f+1,2),c=i.getCellData("value"),i.iRow!=t+1&&n[1].Value==c)return COMMON.prototype.showMessage(Msg.msgAlreayCodeExist),i.setCellData("value",""),i.setCellText(""),!1;if(v=n[6].Data.value,n[6].Data.value>=100||n[8].Data.value>=100||n[10].Data.value>=100)return COMMON.prototype.showMessage(Msg.msgValidDisc_PT),!1;if(r=n[5].Data.dropdownvalue==undefined?-1:dateValidation(n[5].Data.dropdownvalue.toString(),n[5].Data.textvalue),u=n[7].Data.dropdownvalue==undefined?-1:dateValidation(n[7].Data.dropdownvalue.toString(),n[7].Data.textvalue),s=n[9].Data.dropdownvalue==undefined?-1:dateValidation(n[9].Data.dropdownvalue.toString(),n[9].Data.textvalue),h=dateValidation(n[4].Data.dropdownvalue.toString(),n[4].Data.textvalue),h<r&&(h!=-1||r!=-1))return COMMON.prototype.showMessage(Msg.msgDueDateLessThanNextDate),!1;if(u<=s&&(u!=-1||s!=-1)||r<=u&&(r!=-1||u!=-1))return COMMON.prototype.showMessage(Msg.msgValidDiscDateNDisDate_PT),!1;l={PaymentTermId:n[11].Value,PaymentTermCode:n[1].Data.value,AccountId:n[3].Data.value,Description:n[2].Value,Discount1:n[6].Data.value,Discount2:n[8].Data.value,Discount3:n[10].Data.value,DisCountTypeValue1:n[5].Data.value,DisCountTypeValue2:n[7].Data.value,DisCountTypeValue3:n[9].Data.value,DiscountTypeVal1:n[5].Data.textvalue,DiscountTypeVal2:n[7].Data.textvalue,DiscountTypeVal3:n[9].Data.textvalue,DisCountTypeId1:n[5].Data.dropdownvalue,DisCountTypeId2:n[7].Data.dropdownvalue,DisCountTypeId3:n[9].Data.dropdownvalue,DueDateTypeValue:n[4].Data.value,DueDateType:n[4].Data.dropdownvalue,DueDateVal:n[4].Data.textvalue};e.push(l)}}$.ajax({type:"POST",url:GLOBAL.getContextPath("PaymentTermsSaveData","CreditManagement","CreditManagement"),data:{payment:e},datatype:"json",success:function(n){n!=null?($("#viewBody").html(""),$("#viewBody").html(n),COMMON.prototype.showMessage(Msg.msgSavedSuccess)):COMMON.prototype.showMessage("Data Saved failed please Fill Proper Value")}})},Bind:function(n){for(var f,r,e,u,i=n,t=0;t<i.length-1;t++)for(f=0;f<=11;f++){r=FGRIDCONTROL.getCellObject("PaymentTermsGrid",t+1,f+1);switch(f){case 1:r.setCellText(i[t].PaymentTermCode);r.setCellData("value",i[t].PaymentTermCode);break;case 2:r.setCellText(i[t].Description);r.setCellData("value",i[t].Description);break;case 3:e=i[t].AccountId;OPTIONCONTROL.setControlValue("DiscountAccCtrlOption",e);r.setCellText(OPTIONCONTROL.getControlText("DiscountAccCtrlOption"));r.setCellData("value",e);break;case 4:u=PAYMENTTERMS.SetDates(i[t].DueDateType,i[t].DueDateVal);r.setCellText(u);r.setCellData("value",u);r.setCellData("textValue",i[t].DueDateVal);r.setCellData("dropDownValue",i[t].DueDateType);break;case 5:u=PAYMENTTERMS.SetDates(i[t].DisCountTypeId1,i[t].DiscountTypeVal1);i[t].DisCountTypeId1==-1?r.setCellText("Not Applicable"):r.setCellText(u);r.setCellData("value",u);i[t].DiscountTypeVal1=="-1"?r.setCellData("textValue",""):r.setCellData("textValue",i[t].DiscountTypeVal1);r.setCellData("dropDownValue",i[t].DisCountTypeId1);break;case 6:r.setCellText(i[t].Discount1.toFixed(2));r.setCellData("value",i[t].Discount1);break;case 7:u=PAYMENTTERMS.SetDates(i[t].DisCountTypeId2,i[t].DiscountTypeVal2);i[t].DisCountTypeId2==-1?r.setCellText("Not Applicable"):r.setCellText(u);r.setCellData("value",u);i[t].DiscountTypeVal2=="-1"?r.setCellData("textValue",""):r.setCellData("textValue",i[t].DiscountTypeVal2);r.setCellData("dropDownValue",i[t].DisCountTypeId2);break;case 8:r.setCellText(i[t].Discount2.toFixed(2));r.setCellData("value",i[t].Discount2.toFixed(2));break;case 9:u=PAYMENTTERMS.SetDates(i[t].DisCountTypeId3,i[t].DiscountTypeVal3);i[t].DisCountTypeId3==-1?r.setCellText("Not Applicable"):r.setCellText(u);r.setCellData("value",u);i[t].DiscountTypeVal3=="-1"?r.setCellData("textValue",""):r.setCellData("textValue",i[t].DiscountTypeVal3);r.setCellData("dropDownValue",i[t].DisCountTypeId3);break;case 10:r.setCellText(i[t].Discount3.toFixed(2));r.setCellData("value",i[t].Discount3);break;case 11:r.setCellData("value",i[t].PaymentTermId)}}},del:function(){var t=0,i,n,r;if(t=PAYMENTTERMS.getCurrentRow(),i=PAYMENTTERMS.getTotalRows(PAYMENTTERMS.getGrid()),n="",i>1&&$("#PaymentTermsGrid tr").hasClass("FRowColor")==!0)if(r=confirm("do u want to delete selected payment terms details?"),r==!0)blnTotalReminderTermsDel=!1,n=FGRIDCONTROL.getRowValue(this.getGridId(),t),n[11].Value!=null&&n[11].Value>0&&(paymentTermsID=n[11].Value);else return!1;$.ajax({url:GLOBAL.getContextPath("DeletePaymentTermById","CreditManagement","CreditManagement"),type:"POST",datatype:"JSON",data:{iPaymentTermsId:paymentTermsID},success:function(n){n==-1?COMMON.prototype.showMessage(Msg.wndPTDelError):($("#page_Content").html(""),$("#page_Content").html(n),COMMON.prototype.showMessage(Msg.msgDelSucces))}})},getGridId:function(){return PAYMENTTERMS.getGrid()},getGrid:function(){return"PaymentTermsGrid"},getCurrentRow:function(){var n=null;try{n=FGRIDCONTROL.getCurrentRow(this.getGridId())==null?0:FGRIDCONTROL.getCurrentRow(this.getGridId())}catch(t){n=0}return n},getTotalRows:function(){return FGRIDCONTROL.getTotalRows(this.getGridId())},getTotalColumns:function(){return FGRIDCONTROL.getTotalColumns(this.getGridId())},discountRoundoff:function(n,t){if(t==!0){var r=n.target.id,u=$("#"+r).attr("data-row"),i=document.getElementById(n.currentTarget.id);i.value=Number(i.value).toFixed(2)}},SetDates:function(n,t){switch(n){case 0:return t+" Days";case 1:return t+" Weeks";case 2:return t+" Months";case 3:return t+" Day of Week";case 4:return t+" Day of Month";case 5:return"End of Month";default:return"Not Applicable"}},ClearText:function(n){$("#"+n).val("")},CheckDiscount:function(n){var i,t,r;return(i=/^(\d+)((\.\d{1,2})?)/,$("#"+n).val().match(i)||$("#"+n).val($("#"+n).val().substring(0,$("#"+n).val().length-1)),t=$("#"+n).val().split("."),parseInt(t.length==2&&t[0])>100)?(t[1]&&(r=$("#"+n).val().substring(0,$("#"+n).val().indexOf(".")-1)+"."+t[1]),$("#"+n).val(r),!1):(t.length==2&&t[1].length>2&&$("#"+n).val($("#"+n).val().substring(0,$("#"+n).val().length-1)),t.length>2&&$("#"+n).val($("#"+n).val().substring(0,$("#"+n).val().length-1)),$("#"+n).val()>100?($("#"+n).val($("#"+n).val().substring(0,$("#"+n).val().length-1)),!1):void 0)},dayValidation:function(n,t){/^[0-9]*\d$/.test($("#"+t).val())||$("#"+t).val($("#"+t).val().substring(0,$("#"+t).val().length-1));switch(parseInt($("#"+n).val())){case 0:if($("#"+t).val()>365)return $("#"+t).val(""),!1;break;case 1:if($("#"+t).val()>52)return $("#"+t).val(""),!1;break;case 2:$("#"+t).val()>12&&$("#"+t).val("");break;case 3:$("#"+t).val()>7&&$("#"+t).val("");break;case 4:$("#"+t).val()>31&&$("#"+t).val("")}},onExchangeInsertRow:function(n){try{FGRIDCONTROL.insertRows("PaymentTermsGrid",n,1);FGRIDCONTROL.update("PaymentTermsGrid")}catch(t){COMMON.prototype.showMessage(t.message,"Exception")}}}